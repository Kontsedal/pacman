!function(e){function t(n){if(i[n])return i[n].exports;var r=i[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var i={};t.m=e,t.c=i,t.i=function(e){return e},t.d=function(e,i,n){t.o(e,i)||Object.defineProperty(e,i,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var i=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(i,"a",i),i},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=43)}([function(e,t,i){"use strict";var n={Always:1,Never:2,IfAtMostOneObstacle:3,OnlyWhenNoObstacles:4};e.exports=n},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.moveDirections={LEFT:"LEFT",RIGHT:"RIGHT",UP:"UP",DOWN:"DOWN",STOP:"STOP"},t.gameObjectsTypes={EMPTINESS:0,WALL:1,COIN:2,BIG_COIN:3}},function(e,t,i){"use strict";function n(e){for(var t=[[e.x,e.y]];e.parent;)e=e.parent,t.push([e.x,e.y]);return t.reverse()}function r(e,t){var i=n(e),r=n(t);return i.concat(r.reverse())}function o(e){var t,i,n,r,o,s=0;for(t=1;t<e.length;++t)i=e[t-1],n=e[t],r=i[0]-n[0],o=i[1]-n[1],s+=Math.sqrt(r*r+o*o);return s}function s(e,t,i,n){var r,o,s,a,l,u,c=Math.abs,h=[];for(s=c(i-e),a=c(n-t),r=e<i?1:-1,o=t<n?1:-1,l=s-a;h.push([e,t]),e!==i||t!==n;)u=2*l,u>-a&&(l-=a,e+=r),u<s&&(l+=s,t+=o);return h}function a(e){var t,i,n,r,o,a,l=[],u=e.length;if(u<2)return l;for(o=0;o<u-1;++o)for(t=e[o],i=e[o+1],n=s(t[0],t[1],i[0],i[1]),r=n.length,a=0;a<r-1;++a)l.push(n[a]);return l.push(e[u-1]),l}function l(e,t){var i,n,r,o,a,l,u,c,h,f,p,d=t.length,v=t[0][0],y=t[0][1],m=t[d-1][0],b=t[d-1][1];for(i=v,n=y,a=[[i,n]],l=2;l<d;++l){for(c=t[l],r=c[0],o=c[1],h=s(i,n,r,o),p=!1,u=1;u<h.length;++u)if(f=h[u],!e.isWalkableAt(f[0],f[1])){p=!0;break}p&&(lastValidCoord=t[l-1],a.push(lastValidCoord),i=lastValidCoord[0],n=lastValidCoord[1])}return a.push([m,b]),a}function u(e){if(e.length<3)return e;var t,i,n,r,o,s,a=[],l=e[0][0],u=e[0][1],c=e[1][0],h=e[1][1],f=c-l,p=h-u;for(o=Math.sqrt(f*f+p*p),f/=o,p/=o,a.push([l,u]),s=2;s<e.length;s++)t=c,i=h,n=f,r=p,c=e[s][0],h=e[s][1],f=c-t,p=h-i,o=Math.sqrt(f*f+p*p),f/=o,p/=o,f===n&&p===r||a.push([t,i]);return a.push([c,h]),a}t.backtrace=n,t.biBacktrace=r,t.pathLength=o,t.interpolate=s,t.expandPath=a,t.smoothenPath=l,t.compressPath=u},function(e,t,i){"use strict";e.exports={manhattan:function(e,t){return e+t},euclidean:function(e,t){return Math.sqrt(e*e+t*t)},octile:function(e,t){var i=Math.SQRT2-1;return e<t?i*e+t:i*t+e},chebyshev:function(e,t){return Math.max(e,t)}}},function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),s=function(){function e(){n(this,e),this.events={}}return o(e,[{key:"on",value:function(e,t){"object"!==r(this.events[e])&&(this.events[e]=[]),this.events[e].push(t)}},{key:"removeListener",value:function(e,t){var i=void 0;"object"===r(this.events[e])&&(i=this.events[e].indexOf(t))>-1&&this.events[e].splice(i,1)}},{key:"emit",value:function(e){var t=void 0,i=void 0,n=void 0,o=[].slice.call(arguments,1);if("object"===r(this.events[e]))for(i=this.events[e].slice(),n=i.length,t=0;t<n;t++)i[t].apply(this,o)}},{key:"once",value:function(e,t){this.on(e,function i(){this.removeListener(e,i),t.apply(this,arguments)})}}]),e}();t.default=new s},function(e,t,i){"use strict";e.exports=i(26)},function(e,t,i){"use strict";function n(e){e=e||{},this.heuristic=e.heuristic||s.manhattan,this.trackJumpRecursion=e.trackJumpRecursion||!1}var r=i(5),o=i(2),s=i(3);i(0),n.prototype.findPath=function(e,t,i,n,s){var a,l=this.openList=new r(function(e,t){return e.f-t.f}),u=this.startNode=s.getNodeAt(e,t),c=this.endNode=s.getNodeAt(i,n);for(this.grid=s,u.g=0,u.f=0,l.push(u),u.opened=!0;!l.empty();){if(a=l.pop(),a.closed=!0,a===c)return o.expandPath(o.backtrace(c));this._identifySuccessors(a)}return[]},n.prototype._identifySuccessors=function(e){var t,i,n,r,o,a,l,u,c,h,f=this.grid,p=this.heuristic,d=this.openList,v=this.endNode.x,y=this.endNode.y,m=e.x,b=e.y,g=Math.abs;for(Math.max,t=this._findNeighbors(e),r=0,o=t.length;r<o;++r)if(i=t[r],n=this._jump(i[0],i[1],m,b)){if(a=n[0],l=n[1],h=f.getNodeAt(a,l),h.closed)continue;u=s.octile(g(a-m),g(l-b)),c=e.g+u,(!h.opened||c<h.g)&&(h.g=c,h.h=h.h||p(g(a-v),g(l-y)),h.f=h.g+h.h,h.parent=e,h.opened?d.updateItem(h):(d.push(h),h.opened=!0))}},e.exports=n},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){var i=[],n=!0,r=!1,o=void 0;try{for(var s,a=e[Symbol.iterator]();!(n=(s=a.next()).done)&&(i.push(s.value),!t||i.length!==t);n=!0);}catch(e){r=!0,o=e}finally{try{!n&&a.return&&a.return()}finally{if(r)throw o}}return i}return function(t,i){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),u=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),c=i(1),h=i(14),f=n(h),p=i(8),d=n(p),v=i(4),y=n(v),m=function(e){function t(e){var i,n=e.ctx,a=(e.map,e.x),l=e.y,u=e.size,h=(e.findPath,e.pacman),f=e.speed,p=e.goToX,d=e.goToY,v=e.enabled,y=e.escapeTime,m=e.dieTime,b=e.findPacmanEverywhereInterval;o(this,t);var g=s(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments));return g.startX=a,g.startY=l,g.size=u,g.ctx=n,g.ghostColor="#7367ee",g.pacman=h,g.enabled=v,g.speed=f,g.escapeTime=y,g.dieTime=m,g.findPacmanEverywhereInterval=b,g.moveSides=(i={},r(i,c.moveDirections.LEFT,!1),r(i,c.moveDirections.RIGHT,!1),r(i,c.moveDirections.UP,!1),r(i,c.moveDirections.DOWN,!1),i),g.behaviorTypes={SEEK:"SEEK",FOLLOW:"FOLLOW",ESCAPE:"ESCAPE",DIE:"DIE"},g.behavior=g.behaviorTypes.SEEK,g.moveSteps=[],g.moveDirection=null,g.lastCeil=g.serializePosition(l,a),g.initEventHandlers(),g.goTo({x:p,y:d}),g.initFindEverywhere(),g}return a(t,e),u(t,[{key:"initFindEverywhere",value:function(){var e=this;setInterval(function(){e.behavior!=e.behaviorTypes.DIE&&e.behavior!=e.behaviorTypes.ESCAPE&&(e.goToPacman(),e.finding=!0,e.removeFindingTimeout&&(clearTimeout(e.removeFindingTimeout),e.removeFindingTimeout=null),e.removeFindingTimeout=setTimeout(function(){e.finding=!1},2e3))},this.findPacmanEverywhereInterval)}},{key:"goTo",value:function(e,t){var i=e.y,n=e.x;this.moveDirection=null,this.moveSteps=this.findPath({startX:this.xPos,startY:this.yPos,endX:n,endY:i}),"function"==typeof t&&this.moveSteps.push(t)}},{key:"lookForPacman",value:function(){var e=this.pacman.getPosition(),t=l(e,2),i=t[0],n=t[1],r=this.getPosition(),o=l(r,2),s=o[0],a=o[1];if(n==a&&i==s)return this.onCollisionWithPacman();if(!this.moveSteps.length){var u=!1,h=null;if(a==n){for(var f=s;this.canGoHere({y:f,x:a});)f==i&&(u=!0,h=c.moveDirections.DOWN),f++;for(f=s;this.canGoHere({y:f,x:a});)f==i&&(u=!0,h=c.moveDirections.UP),f--}if(s==i){for(var p=a;this.canGoHere({y:s,x:p});)p==n&&(u=!0,h=c.moveDirections.RIGHT),p++;for(p=a;this.canGoHere({y:s,x:p});)p==n&&(u=!0,h=c.moveDirections.LEFT),p--}u&&(this.behavior==this.behaviorTypes.SEEK||this.behavior==this.behaviorTypes.FOLLOW?this.goToPacman():this.behavior==this.behaviorTypes.ESCAPE&&this.escapeFromPacman({pacmanSide:h}))}}},{key:"goToPacman",value:function(){throw new Error("You must override goToPacman Ghost method!")}},{key:"escapeFromPacman",value:function(e){var t=e.pacmanSide;this.moveSides[t]=!1,this.moveSteps=[]}},{key:"onCollisionWithPacman",value:function(){this.behavior!==this.behaviorTypes.SEEK&&this.behavior!==this.behaviorTypes.FOLLOW||y.default.emit(d.default.DIE_PACMAN),this.behavior===this.behaviorTypes.ESCAPE&&(y.default.emit(d.default.EAT_GHOST),this.die())}},{key:"die",value:function(){var e=this;this.behavior=this.behaviorTypes.DIE,this.goTo({x:this.startX,y:this.startY},function(){e.enabled=!1,e.xPos=Math.round(e.xPos),e.yPos=Math.round(e.yPos),setTimeout(function(){e.enabled=!0,e.behavior=e.behaviorTypes.SEEK},e.dieTime)})}},{key:"serializePosition",value:function(e,t){return[e,t].join(",")}},{key:"render",value:function(){this.enabled&&this.move(),this.renderGhost()}},{key:"setRandomDirection",value:function(){var e=this,t=this.moveDirection,i=!this.moveSides[t],n=this.getOppositeDirection(t);if(i||Math.random()>.5){var r=Object.keys(this.moveSides),o=[];if(r.map(function(t){e.moveSides[t]&&t!==n&&o.push(t)}),0==o.length)return this.moveDirection=n;this.moveDirection=o[Math.floor(Math.random()*o.length)]}}},{key:"move",value:function(){this.checkForPortal(),this.checkMoveSides(),this.lookForPacman();var e=this.getPosition(),t=l(e,2),i=t[0],n=t[1];if(this.lastCeil!==this.serializePosition(i,n)||!this.moveDirection)if(this.lastCeil=this.serializePosition(i,n),this.moveSteps.length){var r=this.moveSteps.shift();"function"==typeof r?r():this.moveDirection=r}else this.setRandomDirection();this.moveSides[this.moveDirection]||(this.moveSteps=[],this.setRandomDirection());var o=this.speed;switch(this.behavior==this.behaviorTypes.ESCAPE&&(o/=1.5),this.moveDirection){case c.moveDirections.RIGHT:if(!this.moveSides.RIGHT)return void(this.xPos=Math.round(this.xPos));this.yPos=Math.round(this.yPos),this.xPos=this.xPos+o;break;case c.moveDirections.DOWN:if(!this.moveSides.DOWN)return void(this.yPos=Math.round(this.yPos));this.xPos=Math.round(this.xPos),this.yPos=this.yPos+o;break;case c.moveDirections.LEFT:if(!this.moveSides.LEFT)return void(this.xPos=Math.round(this.xPos));this.yPos=Math.round(this.yPos),this.xPos=this.xPos-o;break;case c.moveDirections.UP:if(!this.moveSides.UP)return void(this.yPos=Math.round(this.yPos));this.xPos=Math.round(this.xPos),this.yPos=this.yPos-o}}},{key:"initEventHandlers",value:function(){var e=this;y.default.on(d.default.EAT_BIG_COIN,function(){e.behavior!==e.behaviorTypes.DIE&&(e.behavior=e.behaviorTypes.ESCAPE),e.setSeekTimeout&&(clearTimeout(e.setSeekTimeout),e.setSeekTimeout=void 0),e.setSeekTimeout=setTimeout(function(){e.behavior=e.behaviorTypes.SEEK},e.escapeTime)}),y.default.on(d.default.DIE_PACMAN,function(){e.enabled=!1})}},{key:"renderGhost",value:function(){var e=this.ghostColor;this.behavior==this.behaviorTypes.ESCAPE&&(e="#5548dd");var t="#fff";!this.finding||this.behavior!=this.behaviorTypes.FOLLOW&&this.behavior!=this.behaviorTypes.SEEK||(t="#ff271a");var i=this.ctx,n=this.xPos*this.size,r=this.yPos*this.size,o=(this.size-2)/2.5;i.beginPath(),i.save(),i.translate(n,r);var s=this.size/2-o;this.behavior!==this.behaviorTypes.DIE&&(i.arc(this.size/2,o+1,o,2*Math.PI,0),i.rect(s,1.1*o,2*o,o),i.rect(s,2*o,o/2,o/2),i.rect(s+.75*o,2*o,o/2,o/2),i.rect(s+1.5*o,2*o,o/2,o/2),i.fillStyle=e,i.fill());var a=o/3;switch(i.beginPath(),i.arc(s+o/2,o,a,2*Math.PI,0),i.arc(s+1.5*o,o,a,2*Math.PI,0),this.behavior==this.behaviorTypes.DIE&&(i.strokeStyle="#808182",i.stroke()),i.fillStyle=t,i.fill(),i.beginPath(),this.moveDirection){case c.moveDirections.RIGHT:i.arc(s+o/2+a/2,o,a/2,2*Math.PI,0),i.arc(s+1.5*o+a/2,o,a/2,2*Math.PI,0);break;case c.moveDirections.LEFT:i.arc(s+o/2-a/2,o,a/2,2*Math.PI,0),i.arc(s+1.5*o-a/2,o,a/2,2*Math.PI,0);break;case c.moveDirections.UP:i.arc(s+o/2,o-a/2,a/2,2*Math.PI,0),i.arc(s+1.5*o,o-a/2,a/2,2*Math.PI,0);break;case c.moveDirections.DOWN:i.arc(s+o/2,o+a/2,a/2,2*Math.PI,0),i.arc(s+1.5*o,o+a/2,a/2,2*Math.PI,0);break;default:i.arc(s+o/2,o,a/2,2*Math.PI,0),i.arc(s+1.5*o,o,a/2,2*Math.PI,0)}i.fillStyle="#000000",i.fill(),i.restore()}}]),t}(f.default);t.default=m},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={EAT_COIN:"EAT_COIN",EAT_BIG_COIN:"EAT_BIG_COIN",DIE_PACMAN:"DIE_PACMAN",EAT_GHOST:"EAT_GHOST",PACMAN_DEAD:"PACMAN_DEAD"}},function(e,t,i){"use strict";function n(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}Object.defineProperty(t,"__esModule",{value:!0}),t.levels=t.defaultMap=t.scorePerObject=t.scoreToAwardLife=t.pacmanLives=t.gameCells=t.gameRows=t.blockSize=t.selectors=void 0;var r,o=i(1),s=(t.selectors={SCORE:".js-score",PLAY_BUTTON:".js-play",CANVAS:"#game",PLAY_VIEW:".js-play-view",NEXT_LVL_VIEW:".js-new-lvl-view",NEW_LVL_NUMBER:".js-new-lvl",NEXT_LVL_BUTTON:".js-next-lvl-btn",LVL_TITLE:".js-lvl-title",LIVES:".js-lives",LVL:".js-lvl",GAME_OVER_VIEW:".js-game-over-view",GAME_OVER_SCORE:".js-gameover-score"},t.blockSize=20,t.gameRows=22,t.gameCells=27,t.pacmanLives=3,t.scoreToAwardLife=5e3,t.scorePerObject=(r={},n(r,o.gameObjectsTypes.COIN,10),n(r,o.gameObjectsTypes.BIG_COIN,50),n(r,"GHOST",200),r),t.defaultMap=[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2,2,2,1,2,2,2,2,2,2,2,2,2,2,2,2,1,1,2,1,1,1,1,2,1,1,1,1,1,2,1,2,1,1,1,1,1,2,1,1,1,1,2,1,1,3,1,1,1,1,2,1,1,1,1,1,2,1,2,1,1,1,1,1,2,1,1,1,1,3,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,1,2,1,1,1,1,2,1,2,1,1,1,1,1,1,1,1,1,2,1,2,1,1,1,1,2,1,1,2,2,2,2,2,2,1,2,2,2,2,2,1,2,2,2,2,2,1,2,2,2,2,2,2,1,1,1,1,1,1,1,2,1,1,1,1,1,0,1,0,1,1,1,1,1,2,1,1,1,1,1,1,0,0,0,0,0,1,2,1,0,0,0,0,0,0,0,0,0,0,0,1,2,1,0,0,0,0,0,1,1,1,1,1,1,2,1,0,1,1,1,0,0,0,1,1,1,0,1,2,1,1,1,1,1,1,0,0,0,0,0,0,2,0,0,1,0,0,0,0,0,0,0,1,0,0,2,0,0,0,0,0,0,1,1,1,1,1,1,2,1,0,1,1,1,1,1,1,1,1,1,0,1,2,1,1,1,1,1,1,0,0,0,0,0,1,2,1,0,0,0,0,0,0,0,0,0,0,0,1,2,1,0,0,0,0,0,1,1,1,1,1,1,2,1,0,1,1,1,1,1,1,1,1,1,0,1,2,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2,2,2,1,2,2,2,2,2,2,2,2,2,2,2,2,1,1,2,1,1,1,1,2,1,1,1,1,1,2,1,2,1,1,1,1,1,2,1,1,1,1,2,1,1,3,2,2,2,1,2,2,2,0,0,0,0,0,0,0,0,0,2,2,2,1,2,2,2,3,1,1,1,1,1,2,1,2,1,2,1,1,1,1,1,1,1,1,1,2,1,2,1,2,1,1,1,1,1,2,2,2,2,2,2,1,2,2,2,2,2,1,2,2,2,2,2,1,2,2,2,2,2,2,1,1,2,1,1,1,1,1,1,1,1,1,1,2,1,2,1,1,1,1,1,1,1,1,1,1,2,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]),a=t.levels={1:{map:s,escapeTime:1e4,dieTime:5e3,findPacmanEverywhereInterval:5e3,lvlTitle:"It's only beginning",pacman:{speed:.15,eatSpeed:.1,x:13,y:16},inky:{enabled:!0,startX:11,startY:10,goToX:1,goToY:1,speed:.105},blinky:{enabled:!0,startX:12,startY:10,goToX:25,goToY:1,speed:.105},clyde:{enabled:!1,startX:14,startY:10,goToX:1,goToY:20,speed:.105},pinky:{enabled:!1,startX:15,startY:10,goToX:25,goToY:20,speed:.105}},2:{map:s,escapeTime:1e4,dieTime:5e3,findPacmanEverywhereInterval:5e3,lvlTitle:"Clyde awakening",pacman:{speed:.15,eatSpeed:.1,x:13,y:16},inky:{enabled:!0,startX:11,startY:10,goToX:1,goToY:1,speed:.105},blinky:{enabled:!0,startX:12,startY:10,goToX:25,goToY:1,speed:.105},clyde:{enabled:!0,startX:14,startY:10,goToX:1,goToY:20,speed:.105},pinky:{enabled:!1,startX:15,startY:10,goToX:25,goToY:20,speed:.105}},3:{map:s,escapeTime:1e4,dieTime:5e3,findPacmanEverywhereInterval:5e3,lvlTitle:"Pinky awakening",pacman:{speed:.15,eatSpeed:.1,x:13,y:16},inky:{enabled:!0,startX:11,startY:10,goToX:1,goToY:1,speed:.105},blinky:{enabled:!0,startX:12,startY:10,goToX:25,goToY:1,speed:.105},clyde:{enabled:!0,startX:14,startY:10,goToX:1,goToY:20,speed:.105},pinky:{enabled:!0,startX:15,startY:10,goToX:25,goToY:20,speed:.105}},4:{map:s,escapeTime:5e3,dieTime:2e3,findPacmanEverywhereInterval:1e3,lvlTitle:"Pure hardcore",pacman:{speed:.14,eatSpeed:.09,x:13,y:16},inky:{enabled:!0,startX:11,startY:10,goToX:1,goToY:1,speed:.105},blinky:{enabled:!0,startX:12,startY:10,goToX:25,goToY:1,speed:.105},clyde:{enabled:!0,startX:14,startY:10,goToX:1,goToY:20,speed:.105},pinky:{enabled:!0,startX:15,startY:10,goToX:25,goToY:20,speed:.105}}};a.defaultLevel=a[1]},function(e,t,i){"use strict";function n(e,t,i){this.x=e,this.y=t,this.walkable=void 0===i||i}e.exports=n},function(e,t,i){"use strict";function n(e){e=e||{},this.allowDiagonal=e.allowDiagonal,this.dontCrossCorners=e.dontCrossCorners,this.heuristic=e.heuristic||s.manhattan,this.weight=e.weight||1,this.diagonalMovement=e.diagonalMovement,this.diagonalMovement||(this.allowDiagonal?this.dontCrossCorners?this.diagonalMovement=a.OnlyWhenNoObstacles:this.diagonalMovement=a.IfAtMostOneObstacle:this.diagonalMovement=a.Never),this.diagonalMovement===a.Never?this.heuristic=e.heuristic||s.manhattan:this.heuristic=e.heuristic||s.octile}var r=i(5),o=i(2),s=i(3),a=i(0);n.prototype.findPath=function(e,t,i,n,s){var a,l,u,c,h,f,p,d,v=new r(function(e,t){return e.f-t.f}),y=s.getNodeAt(e,t),m=s.getNodeAt(i,n),b=this.heuristic,g=this.diagonalMovement,P=this.weight,k=Math.abs,T=Math.SQRT2;for(y.g=0,y.f=0,v.push(y),y.opened=!0;!v.empty();){if(a=v.pop(),a.closed=!0,a===m)return o.backtrace(m);for(l=s.getNeighbors(a,g),c=0,h=l.length;c<h;++c)u=l[c],u.closed||(f=u.x,p=u.y,d=a.g+(f-a.x==0||p-a.y==0?1:T),(!u.opened||d<u.g)&&(u.g=d,u.h=u.h||P*b(k(f-i),k(p-n)),u.f=u.g+u.h,u.parent=a,u.opened?v.updateItem(u):(v.push(u),u.opened=!0)))}return[]},e.exports=n},function(e,t,i){"use strict";function n(e){e=e||{},this.allowDiagonal=e.allowDiagonal,this.dontCrossCorners=e.dontCrossCorners,this.diagonalMovement=e.diagonalMovement,this.heuristic=e.heuristic||s.manhattan,this.weight=e.weight||1,this.diagonalMovement||(this.allowDiagonal?this.dontCrossCorners?this.diagonalMovement=a.OnlyWhenNoObstacles:this.diagonalMovement=a.IfAtMostOneObstacle:this.diagonalMovement=a.Never),this.diagonalMovement===a.Never?this.heuristic=e.heuristic||s.manhattan:this.heuristic=e.heuristic||s.octile}var r=i(5),o=i(2),s=i(3),a=i(0);n.prototype.findPath=function(e,t,i,n,s){var a,l,u,c,h,f,p,d,v=function(e,t){return e.f-t.f},y=new r(v),m=new r(v),b=s.getNodeAt(e,t),g=s.getNodeAt(i,n),P=this.heuristic,k=this.diagonalMovement,T=this.weight,w=Math.abs,O=Math.SQRT2;for(b.g=0,b.f=0,y.push(b),b.opened=1,g.g=0,g.f=0,m.push(g),g.opened=2;!y.empty()&&!m.empty();){for(a=y.pop(),a.closed=!0,l=s.getNeighbors(a,k),c=0,h=l.length;c<h;++c)if(u=l[c],!u.closed){if(2===u.opened)return o.biBacktrace(a,u);f=u.x,p=u.y,d=a.g+(f-a.x==0||p-a.y==0?1:O),(!u.opened||d<u.g)&&(u.g=d,u.h=u.h||T*P(w(f-i),w(p-n)),u.f=u.g+u.h,u.parent=a,u.opened?y.updateItem(u):(y.push(u),u.opened=1))}for(a=m.pop(),a.closed=!0,l=s.getNeighbors(a,k),c=0,h=l.length;c<h;++c)if(u=l[c],!u.closed){if(1===u.opened)return o.biBacktrace(u,a);f=u.x,p=u.y,d=a.g+(f-a.x==0||p-a.y==0?1:O),(!u.opened||d<u.g)&&(u.g=d,u.h=u.h||T*P(w(f-e),w(p-t)),u.f=u.g+u.h,u.parent=a,u.opened?m.updateItem(u):(m.push(u),u.opened=2))}}return[]},e.exports=n},function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.KeyPressEvents=void 0;var r=i(4),o=function(e){return e&&e.__esModule?e:{default:e}}(r),s=function e(){n(this,e),document.addEventListener("keydown",function(t){switch(t.which){case 39:return o.default.emit(e.events.PRESS_RIGHT);case 40:return o.default.emit(e.events.PRESS_DOWN);case 37:return o.default.emit(e.events.PRESS_LEFT);case 38:return o.default.emit(e.events.PRESS_UP)}})};s.events={PRESS_RIGHT:"PRESS_RIGHT",PRESS_LEFT:"PRESS_LEFT",PRESS_UP:"PRESS_UP",PRESS_DOWN:"PRESS_DOWN"},t.default=new s,t.KeyPressEvents=s.events},function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){var i=[],n=!0,r=!1,o=void 0;try{for(var s,a=e[Symbol.iterator]();!(n=(s=a.next()).done)&&(i.push(s.value),!t||i.length!==t);n=!0);}catch(e){r=!0,o=e}finally{try{!n&&a.return&&a.return()}finally{if(r)throw o}}return i}return function(t,i){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),s=i(1),a=i(9),l=i(44),u=function(e){return e&&e.__esModule?e:{default:e}}(l),c=function(){function e(t){var i=t.map,r=t.x,o=t.y,s=t.findPath;n(this,e),this.map=i,this.findPath=s,this.moveSides={LEFT:!1,RIGHT:!1,UP:!1,DOWN:!1},this.xPos=r,this.yPos=o}return o(e,[{key:"checkMoveSides",value:function(){var e=Math.round(this.xPos),t=Math.round(this.yPos);this.moveSides={LEFT:this.checkWallExistence(e-1,t),RIGHT:this.checkWallExistence(e+1,t),UP:this.checkWallExistence(e,t-1),DOWN:this.checkWallExistence(e,t+1)},this.nextState&&this.moveSides[this.nextState]&&(this.moveDirection=this.nextState,this.nextState=null)}},{key:"checkWallExistence",value:function(e,t){var i=this.map[t]||[],n=i[e];return n?n.type!==s.gameObjectsTypes.WALL:(e<0||t<0||e>=a.gameCells||t>=a.gameRows)&&this.inPortal}},{key:"getOppositeDirection",value:function(e){switch(e){case s.moveDirections.RIGHT:return s.moveDirections.LEFT;case s.moveDirections.DOWN:return s.moveDirections.UP;case s.moveDirections.LEFT:return s.moveDirections.RIGHT;case s.moveDirections.UP:return s.moveDirections.DOWN}}},{key:"checkForPortal",value:function(){this.inPortal=!1;var e=this.getPosition(),t=r(e,2),i=t[0],n=t[1];this.mirriorX=n,n<=0&&this.moveDirection==s.moveDirections.LEFT&&(this.inPortal=!0,this.mirriorX=a.gameCells+n),n<=-1&&this.moveDirection==s.moveDirections.LEFT&&(this.xPos=a.gameCells-n-1,this.inPortal=!1),n>=a.gameCells-1&&this.moveDirection==s.moveDirections.RIGHT&&(this.inPortal=!0,this.mirriorX=n-a.gameCells),n>=a.gameCells&&this.moveDirection==s.moveDirections.RIGHT&&(this.xPos=n-a.gameCells,this.inPortal=!1),this.mirriorY=i,i<=0&&this.moveDirection==s.moveDirections.UP&&(this.inPortal=!0,this.mirriorY=a.gameRows+i),i<=-1&&this.moveDirection==s.moveDirections.UP&&(this.yPos=a.gameRows-i-1,this.inPortal=!1),i>=a.gameRows-1&&this.moveDirection==s.moveDirections.DOWN&&(this.inPortal=!0,this.mirriorY=i-a.gameRows),i>=a.gameRows&&this.moveDirection==s.moveDirections.DOWN&&(this.yPos=i-a.gameRows,this.inPortal=!1)}},{key:"getPosition",value:function(){return[Math.round(this.yPos),Math.round(this.xPos)]}},{key:"getDirection",value:function(){return this.moveDirection}},{key:"canGoHere",value:function(e){var t=e.x,i=e.y;return(0,u.default)(this.map[i])&&(0,u.default)(this.map[i][t])&&this.map[i][t].type!==s.gameObjectsTypes.WALL}}]),e}();t.default=c},function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),o=i(1),s=function(){function e(t){var i=t.ctx,r=t.row,s=t.ceil,a=t.size;n(this,e),this.ctx=i,this.x=s,this.y=r,this.size=a,this.color="#ef844f",this.type=o.gameObjectsTypes.BIG_COIN}return r(e,[{key:"render",value:function(){this.ctx.beginPath();var e=this.x*this.size+this.size/2,t=this.y*this.size+this.size/2;this.ctx.arc(e,t,4,0,2*Math.PI),this.ctx.closePath(),this.ctx.fillStyle=this.color,this.ctx.fill()}}]),e}();t.default=s},function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),o=i(1),s=function(){function e(t){var i=t.ctx,r=t.row,s=t.ceil,a=t.size;n(this,e),this.ctx=i,this.x=s,this.y=r,this.size=a,this.color="#efd050",this.type=o.gameObjectsTypes.COIN}return r(e,[{key:"render",value:function(){this.ctx.beginPath();var e=this.x*this.size+this.size/2,t=this.y*this.size+this.size/2;this.ctx.arc(e,t,2.5,0,2*Math.PI),this.ctx.closePath(),this.ctx.fillStyle=this.color,this.ctx.fill()}}]),e}();t.default=s},function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),o=i(1),s=function(){function e(){n(this,e),this.type=o.gameObjectsTypes.EMPTINESS}return r(e,[{key:"render",value:function(){}}]),e}();t.default=s},function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),o=i(1),s=function(){function e(t){var i=t.ctx,r=t.row,s=t.ceil,a=t.size;n(this,e),this.ctx=i,this.x=s,this.y=r,this.size=a,this.color="#4c4c4c",this.type=o.gameObjectsTypes.WALL}return r(e,[{key:"render",value:function(){this.ctx.beginPath(),this.ctx.rect(this.x*this.size,this.y*this.size,this.size,this.size),this.ctx.closePath(),this.ctx.fillStyle=this.color,this.ctx.fill()}}]),e}();t.default=s},function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){var i=[],n=!0,r=!1,o=void 0;try{for(var s,a=e[Symbol.iterator]();!(n=(s=a.next()).done)&&(i.push(s.value),!t||i.length!==t);n=!0);}catch(e){r=!0,o=e}finally{try{!n&&a.return&&a.return()}finally{if(r)throw o}}return i}return function(t,i){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),s=i(27),a=function(e){return e&&e.__esModule?e:{default:e}}(s),l=i(1),u=function(){function e(t){var i=t.map;n(this,e),this.map=i,this.matrix=this._mapToBinaryMatrix(),this.grid=new a.default.Grid(this.matrix),this.finder=new a.default.AStarFinder}return o(e,[{key:"_mapToBinaryMatrix",value:function(){return this.map.map(function(e){return e.map(function(e){return e.type==l.gameObjectsTypes.WALL?1:0})})}},{key:"_pathToInstructions",value:function(e){var t=e.shift(),i=t[0],n=t[1],o=[];return e.map(function(e){var t=r(e,2),s=t[0],a=t[1],u=null;s>i&&(u=l.moveDirections.RIGHT),s<i&&(u=l.moveDirections.LEFT),a>n&&(u=l.moveDirections.DOWN),a<n&&(u=l.moveDirections.UP),o.push(u),i=s,n=a}),o}},{key:"findPath",value:function(e){var t=e.startX,i=e.startY,n=e.endX,r=e.endY;t=Math.round(t),i=Math.round(i),n=Math.round(n),r=Math.round(r);var o=this.finder.findPath(t,i,n,r,this.grid.clone());return this._pathToInstructions(o)}}]),e}();t.default=u},function(e,t,i){"use strict";function n(e,t,i){document.addEventListener(e,function(e){e.target&&e.target.matches(t)&&i(e)})}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){var i=[],n=!0,r=!1,o=void 0;try{for(var s,a=e[Symbol.iterator]();!(n=(s=a.next()).done)&&(i.push(s.value),!t||i.length!==t);n=!0);}catch(e){r=!0,o=e}finally{try{!n&&a.return&&a.return()}finally{if(r)throw o}}return i}return function(t,i){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),u=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),c=i(14),h=n(c),f=i(1),p=i(4),d=n(p),v=i(8),y=n(v),m=i(13),b=function(e){function t(e){var i,n=e.ctx,a=e.size,l=e.map,u=(e.x,e.y,e.findPath,e.speed),c=e.eatSpeed;o(this,t);var h=s(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments));return h.speed=u,h.eatSpeed=c,h.map=l,h.ctx=n,h.size=a,h.animationState=0,h.pacmanColor="#ffc215",h.pacmanRenderAngles=(i={},r(i,f.moveDirections.LEFT,[1.25,.25,1.75,.75,-1]),r(i,f.moveDirections.RIGHT,[.25,1.25,.75,1.75,-1]),r(i,f.moveDirections.UP,[.25,1.25,1.75,.75,1]),r(i,f.moveDirections.DOWN,[.75,1.75,1.25,.25,-1]),i),h.pacmanRenderAngles[f.moveDirections.STOP]=h.pacmanRenderAngles[f.moveDirections.RIGHT],h.isEating=!1,h.eatTimeoutTime=200,h.nextState=null,h.moveDirection=f.moveDirections.STOP,h.render(),h.addHandlers(),h}return a(t,e),u(t,[{key:"addHandlers",value:function(){var e=this;d.default.on(m.KeyPressEvents.PRESS_UP,function(){if(!e.inPortal&&!e.died)return e.moveSides.UP?void(e.moveDirection=f.moveDirections.UP):void(e.nextState=f.moveDirections.UP)}),d.default.on(m.KeyPressEvents.PRESS_DOWN,function(){if(!e.inPortal&&!e.died)return e.moveSides.DOWN?void(e.moveDirection=f.moveDirections.DOWN):void(e.nextState=f.moveDirections.DOWN)}),d.default.on(m.KeyPressEvents.PRESS_LEFT,function(){if(!e.inPortal&&!e.died)return e.moveSides.LEFT?void(e.moveDirection=f.moveDirections.LEFT):void(e.nextState=f.moveDirections.LEFT)}),d.default.on(m.KeyPressEvents.PRESS_RIGHT,function(){if(!e.inPortal&&!e.died)return e.moveSides.RIGHT?void(e.moveDirection=f.moveDirections.RIGHT):void(e.nextState=f.moveDirections.RIGHT)}),d.default.on(y.default.DIE_PACMAN,function(){e.died=!0})}},{key:"render",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.xPos,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.yPos;if(this.died)return void this.animateDeath();this.move(),this.animateEating(),this.renderPacman(e,t),this.inPortal&&this.renderPacman(this.mirriorX,this.mirriorY)}},{key:"move",value:function(){this.checkMoveSides(),this.checkForPortal(),this.checkForCoin();var e=void 0,t=this.speed;switch(this.isEating&&(t=this.eatSpeed),this.moveDirection){case f.moveDirections.RIGHT:if(e=this.xPos+t,!this.moveSides.RIGHT)return void(this.xPos=Math.round(this.xPos));this.yPos=Math.round(this.yPos),this.xPos=e;break;case f.moveDirections.DOWN:if(e=this.yPos+t,!this.moveSides.DOWN)return void(this.yPos=Math.round(this.yPos));this.xPos=Math.round(this.xPos),this.yPos=e;break;case f.moveDirections.LEFT:if(e=this.xPos-t,!this.moveSides.LEFT)return void(this.xPos=Math.round(this.xPos));this.yPos=Math.round(this.yPos),this.xPos=e;break;case f.moveDirections.UP:if(e=this.yPos-t,!this.moveSides.UP)return void(this.yPos=Math.round(this.yPos));this.xPos=Math.round(this.xPos),this.yPos=e}}},{key:"checkForCoin",value:function(){var e=Math.ceil(this.xPos-.5),t=Math.ceil(this.yPos-.5),i=this.map[t]||[],n=i[e];n&&n.type===f.gameObjectsTypes.COIN&&(d.default.emit(y.default.EAT_COIN,[e,t]),this.eat()),n&&n.type===f.gameObjectsTypes.BIG_COIN&&(d.default.emit(y.default.EAT_BIG_COIN,[e,t]),this.eat())}},{key:"eat",value:function(){var e=this;this.isEating=!0,this.eatTimeout&&(clearTimeout(this.eatTimeout),this.eatTimeout=void 0),this.eatTimeout=setTimeout(function(){e.isEating=!1},this.eatTimeoutTime)}},{key:"renderPacman",value:function(e,t){var i=this.pacmanRenderAngles[this.moveDirection],n=this.ctx,r=e*this.size+this.size/2,o=t*this.size+this.size/2;n.beginPath();var s=.2*this.animationCoef;n.arc(r,o,(this.size-2)/2,(i[0]+s*i[4])*Math.PI,(i[1]+s*i[4])*Math.PI,!1),n.fillStyle=this.pacmanColor,n.fill(),n.beginPath(),n.arc(r,o,(this.size-2)/2,(i[2]+s*(-1*i[4]))*Math.PI,(i[3]+s*(-1*i[4]))*Math.PI,!1),n.fill()}},{key:"animateEating",value:function(){if(!this.isEating)return this.animationState=0,void(this.animationCoef=0);this.animationState+=5,this.animationCoef=this.animationState%100/100}},{key:"animateDeath",value:function(){this.deathAnimationStep=this.deathAnimationStep?1.07*this.deathAnimationStep:1;var e=this.getPosition(),t=l(e,2),i=t[0],n=t[1],r=this.pacmanRenderAngles[this.moveDirection],o=this.ctx,s=n*this.size+this.size/2,a=i*this.size+this.size/2,u=3*Math.PI*this.deathAnimationStep/80,c=.2*this.animationCoef,h=(this.size-2)/2*this.deathAnimationStep;o.save(),o.rotate(u),o.translate(s-h,a-h),o.beginPath(),o.arc(0,0,h,(r[0]+c*r[4])*Math.PI,(r[1]+c*r[4])*Math.PI,!1),o.fillStyle=this.pacmanColor,o.fill(),o.beginPath(),o.arc(0,0,h,(r[2]+c*(-1*r[4]))*Math.PI,(r[3]+c*(-1*r[4]))*Math.PI,!1),o.fill(),o.restore(),this.deathAnimationStep>=40&&d.default.emit(y.default.PACMAN_DEAD)}}]),t}(h.default);t.default=b},function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){var i=[],n=!0,r=!1,o=void 0;try{for(var s,a=e[Symbol.iterator]();!(n=(s=a.next()).done)&&(i.push(s.value),!t||i.length!==t);n=!0);}catch(e){r=!0,o=e}finally{try{!n&&a.return&&a.return()}finally{if(r)throw o}}return i}return function(t,i){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),l=i(7),u=function(e){return e&&e.__esModule?e:{default:e}}(l),c=function(e){function t(){n(this,t);var e=r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments));return e.ghostColor="#dd352c",e}return o(t,e),a(t,[{key:"goToPacman",value:function(){var e=this.pacman.getPosition(),t=s(e,2),i=t[0],n=t[1];this.goTo({x:n,y:i})}}]),t}(u.default);t.default=c},function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){var i=[],n=!0,r=!1,o=void 0;try{for(var s,a=e[Symbol.iterator]();!(n=(s=a.next()).done)&&(i.push(s.value),!t||i.length!==t);n=!0);}catch(e){r=!0,o=e}finally{try{!n&&a.return&&a.return()}finally{if(r)throw o}}return i}return function(t,i){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),l=i(7),u=function(e){return e&&e.__esModule?e:{default:e}}(l),c=i(9),h=function(e){function t(){n(this,t);var e=r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments));return e.ghostColor="#dd952a",e}return o(t,e),a(t,[{key:"goToPacman",value:function(){var e=void 0,t=void 0,i=this.pacman.getPosition(),n=s(i,2),r=n[0],o=n[1],a=this.getPosition(),l=s(a,2),u=l[0],h=l[1];e=o,t=r,(Math.abs(h-o)>8||Math.abs(u-r)>8)&&(t=c.gameRows-2,e=c.gameCells-2),this.canGoHere({x:e,y:t})||(e=o,t=r),this.goTo({x:e,y:t})}}]),t}(u.default);t.default=h},function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){var i=[],n=!0,r=!1,o=void 0;try{for(var s,a=e[Symbol.iterator]();!(n=(s=a.next()).done)&&(i.push(s.value),!t||i.length!==t);n=!0);}catch(e){r=!0,o=e}finally{try{!n&&a.return&&a.return()}finally{if(r)throw o}}return i}return function(t,i){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),l=i(7),u=function(e){return e&&e.__esModule?e:{default:e}}(l),c=i(1),h=function(e){function t(){n(this,t);var e=r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments));return e.ghostColor="#4ad6dd",e}return o(t,e),a(t,[{key:"goToPacman",value:function(){var e=void 0,t=void 0,i=this.pacman.getPosition(),n=s(i,2),r=n[0],o=n[1],a=this.pacman.getDirection(),l=this.getPosition(),u=s(l,2),h=u[0],f=u[1];switch(a){case c.moveDirections.UP:e=o+o-f,t=r-2+r-2-h;break;case c.moveDirections.DOWN:e=o+o-f,t=r+2+r+2-h;break;case c.moveDirections.RIGHT:e=o+2+o+2-f,t=r+r-h;break;case c.moveDirections.LEFT:e=o-2+o-2-f,t=r+r-h}(Math.abs(this.xPos-o)<=2||Math.abs(this.yPos-r)<=2)&&(e=o,t=r),this.canGoHere({x:e,y:t})||(e=o,t=r),this.goTo({x:e,y:t})}}]),t}(u.default);t.default=h},function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){var i=[],n=!0,r=!1,o=void 0;try{for(var s,a=e[Symbol.iterator]();!(n=(s=a.next()).done)&&(i.push(s.value),!t||i.length!==t);n=!0);}catch(e){r=!0,o=e}finally{try{!n&&a.return&&a.return()}finally{if(r)throw o}}return i}return function(t,i){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),l=i(7),u=function(e){return e&&e.__esModule?e:{default:e}}(l),c=i(1),h=function(e){function t(){n(this,t);var e=r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments));return e.ghostColor="#dd64b9",e}return o(t,e),a(t,[{key:"goToPacman",value:function(){var e=void 0,t=void 0,i=this.pacman.getPosition(),n=s(i,2),r=n[0],o=n[1];switch(this.pacman.getDirection()){case c.moveDirections.UP:e=o-4,t=r-4;break;case c.moveDirections.DOWN:e=o,t=r-4;break;case c.moveDirections.RIGHT:e=o+4,t=r;break;case c.moveDirections.LEFT:e=o-4,t=r}(Math.abs(this.xPos-o)<=2||Math.abs(this.yPos-r)<=2)&&(e=o,t=r),this.canGoHere({x:e,y:t})||(e=o,t=r),this.goTo({x:e,y:t})}}]),t}(u.default);t.default=h},function(e,t,i){"use strict";(function(e){(function(){var t,i,n,r,o,s,a,l,u,c,h,f,p,d,v;n=Math.floor,c=Math.min,i=function(e,t){return e<t?-1:e>t?1:0},u=function(e,t,r,o,s){var a;if(null==r&&(r=0),null==s&&(s=i),r<0)throw new Error("lo must be non-negative");for(null==o&&(o=e.length);r<o;)a=n((r+o)/2),s(t,e[a])<0?o=a:r=a+1;return[].splice.apply(e,[r,r-r].concat(t)),t},s=function(e,t,n){return null==n&&(n=i),e.push(t),d(e,0,e.length-1,n)},o=function(e,t){var n,r;return null==t&&(t=i),n=e.pop(),e.length?(r=e[0],e[0]=n,v(e,0,t)):r=n,r},l=function(e,t,n){var r;return null==n&&(n=i),r=e[0],e[0]=t,v(e,0,n),r},a=function(e,t,n){var r;return null==n&&(n=i),e.length&&n(e[0],t)<0&&(r=[e[0],t],t=r[0],e[0]=r[1],v(e,0,n)),t},r=function(e,t){var r,o,s,a,l,u;for(null==t&&(t=i),a=function(){u=[];for(var t=0,i=n(e.length/2);0<=i?t<i:t>i;0<=i?t++:t--)u.push(t);return u}.apply(this).reverse(),l=[],o=0,s=a.length;o<s;o++)r=a[o],l.push(v(e,r,t));return l},p=function(e,t,n){var r;if(null==n&&(n=i),-1!==(r=e.indexOf(t)))return d(e,0,r,n),v(e,r,n)},h=function(e,t,n){var o,s,l,u,c;if(null==n&&(n=i),s=e.slice(0,t),!s.length)return s;for(r(s,n),c=e.slice(t),l=0,u=c.length;l<u;l++)o=c[l],a(s,o,n);return s.sort(n).reverse()},f=function(e,t,n){var s,a,l,h,f,p,d,v,y;if(null==n&&(n=i),10*t<=e.length){if(l=e.slice(0,t).sort(n),!l.length)return l;for(a=l[l.length-1],d=e.slice(t),h=0,p=d.length;h<p;h++)s=d[h],n(s,a)<0&&(u(l,s,0,null,n),l.pop(),a=l[l.length-1]);return l}for(r(e,n),y=[],f=0,v=c(t,e.length);0<=v?f<v:f>v;0<=v?++f:--f)y.push(o(e,n));return y},d=function(e,t,n,r){var o,s,a;for(null==r&&(r=i),o=e[n];n>t&&(a=n-1>>1,s=e[a],r(o,s)<0);)e[n]=s,n=a;return e[n]=o},v=function(e,t,n){var r,o,s,a,l;for(null==n&&(n=i),o=e.length,l=t,s=e[t],r=2*t+1;r<o;)a=r+1,a<o&&!(n(e[r],e[a])<0)&&(r=a),e[t]=e[r],t=r,r=2*t+1;return e[t]=s,d(e,l,t,n)},t=function(){function e(e){this.cmp=null!=e?e:i,this.nodes=[]}return e.push=s,e.pop=o,e.replace=l,e.pushpop=a,e.heapify=r,e.updateItem=p,e.nlargest=h,e.nsmallest=f,e.prototype.push=function(e){return s(this.nodes,e,this.cmp)},e.prototype.pop=function(){return o(this.nodes,this.cmp)},e.prototype.peek=function(){return this.nodes[0]},e.prototype.contains=function(e){return-1!==this.nodes.indexOf(e)},e.prototype.replace=function(e){return l(this.nodes,e,this.cmp)},e.prototype.pushpop=function(e){return a(this.nodes,e,this.cmp)},e.prototype.heapify=function(){return r(this.nodes,this.cmp)},e.prototype.updateItem=function(e){return p(this.nodes,e,this.cmp)},e.prototype.clear=function(){return this.nodes=[]},e.prototype.empty=function(){return 0===this.nodes.length},e.prototype.size=function(){return this.nodes.length},e.prototype.clone=function(){var t;return t=new e,t.nodes=this.nodes.slice(0),t},e.prototype.toArray=function(){return this.nodes.slice(0)},e.prototype.insert=e.prototype.push,e.prototype.top=e.prototype.peek,e.prototype.front=e.prototype.peek,e.prototype.has=e.prototype.contains,e.prototype.copy=e.prototype.clone,e}(),(void 0!==e&&null!==e?e.exports:void 0)?e.exports=t:window.Heap=t}).call(void 0)}).call(t,i(42)(e))},function(e,t,i){"use strict";e.exports=i(28)},function(e,t,i){"use strict";e.exports={Heap:i(5),Node:i(10),Grid:i(29),Util:i(2),DiagonalMovement:i(0),Heuristic:i(3),AStarFinder:i(11),BestFirstFinder:i(30),BreadthFirstFinder:i(34),DijkstraFinder:i(35),BiAStarFinder:i(12),BiBestFirstFinder:i(31),BiBreadthFirstFinder:i(32),BiDijkstraFinder:i(33),IDAStarFinder:i(36),JumpPointFinder:i(41)}},function(e,t,i){"use strict";function n(e,t,i){var n;"object"!==(void 0===e?"undefined":r(e))?n=e:(t=e.length,n=e[0].length,i=e),this.width=n,this.height=t,this.nodes=this._buildNodes(n,t,i)}var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=i(10),s=i(0);n.prototype._buildNodes=function(e,t,i){var n,r,s=new Array(t);for(n=0;n<t;++n)for(s[n]=new Array(e),r=0;r<e;++r)s[n][r]=new o(r,n);if(void 0===i)return s;if(i.length!==t||i[0].length!==e)throw new Error("Matrix size does not fit");for(n=0;n<t;++n)for(r=0;r<e;++r)i[n][r]&&(s[n][r].walkable=!1);return s},n.prototype.getNodeAt=function(e,t){return this.nodes[t][e]},n.prototype.isWalkableAt=function(e,t){return this.isInside(e,t)&&this.nodes[t][e].walkable},n.prototype.isInside=function(e,t){return e>=0&&e<this.width&&t>=0&&t<this.height},n.prototype.setWalkableAt=function(e,t,i){this.nodes[t][e].walkable=i},n.prototype.getNeighbors=function(e,t){var i=e.x,n=e.y,r=[],o=!1,a=!1,l=!1,u=!1,c=!1,h=!1,f=!1,p=!1,d=this.nodes;if(this.isWalkableAt(i,n-1)&&(r.push(d[n-1][i]),o=!0),this.isWalkableAt(i+1,n)&&(r.push(d[n][i+1]),l=!0),this.isWalkableAt(i,n+1)&&(r.push(d[n+1][i]),c=!0),this.isWalkableAt(i-1,n)&&(r.push(d[n][i-1]),f=!0),t===s.Never)return r;if(t===s.OnlyWhenNoObstacles)a=f&&o,u=o&&l,h=l&&c,p=c&&f;else if(t===s.IfAtMostOneObstacle)a=f||o,u=o||l,h=l||c,p=c||f;else{if(t!==s.Always)throw new Error("Incorrect value of diagonalMovement");a=!0,u=!0,h=!0,p=!0}return a&&this.isWalkableAt(i-1,n-1)&&r.push(d[n-1][i-1]),u&&this.isWalkableAt(i+1,n-1)&&r.push(d[n-1][i+1]),h&&this.isWalkableAt(i+1,n+1)&&r.push(d[n+1][i+1]),p&&this.isWalkableAt(i-1,n+1)&&r.push(d[n+1][i-1]),r},n.prototype.clone=function(){var e,t,i=this.width,r=this.height,s=this.nodes,a=new n(i,r),l=new Array(r);for(e=0;e<r;++e)for(l[e]=new Array(i),t=0;t<i;++t)l[e][t]=new o(t,e,s[e][t].walkable);return a.nodes=l,a},e.exports=n},function(e,t,i){"use strict";function n(e){r.call(this,e);var t=this.heuristic;this.heuristic=function(e,i){return 1e6*t(e,i)}}var r=i(11);n.prototype=new r,n.prototype.constructor=n,e.exports=n},function(e,t,i){"use strict";function n(e){r.call(this,e);var t=this.heuristic;this.heuristic=function(e,i){return 1e6*t(e,i)}}var r=i(12);n.prototype=new r,n.prototype.constructor=n,e.exports=n},function(e,t,i){"use strict";function n(e){e=e||{},this.allowDiagonal=e.allowDiagonal,this.dontCrossCorners=e.dontCrossCorners,this.diagonalMovement=e.diagonalMovement,this.diagonalMovement||(this.allowDiagonal?this.dontCrossCorners?this.diagonalMovement=o.OnlyWhenNoObstacles:this.diagonalMovement=o.IfAtMostOneObstacle:this.diagonalMovement=o.Never)}var r=i(2),o=i(0);n.prototype.findPath=function(e,t,i,n,o){var s,a,l,u,c,h=o.getNodeAt(e,t),f=o.getNodeAt(i,n),p=[],d=[],v=this.diagonalMovement;for(p.push(h),h.opened=!0,h.by=0,d.push(f),f.opened=!0,f.by=1;p.length&&d.length;){for(l=p.shift(),l.closed=!0,s=o.getNeighbors(l,v),u=0,c=s.length;u<c;++u)if(a=s[u],!a.closed)if(a.opened){if(1===a.by)return r.biBacktrace(l,a)}else p.push(a),a.parent=l,a.opened=!0,a.by=0;for(l=d.shift(),l.closed=!0,s=o.getNeighbors(l,v),u=0,c=s.length;u<c;++u)if(a=s[u],!a.closed)if(a.opened){if(0===a.by)return r.biBacktrace(a,l)}else d.push(a),a.parent=l,a.opened=!0,a.by=1}return[]},e.exports=n},function(e,t,i){"use strict";function n(e){r.call(this,e),this.heuristic=function(e,t){return 0}}var r=i(12);n.prototype=new r,n.prototype.constructor=n,e.exports=n},function(e,t,i){"use strict";function n(e){e=e||{},this.allowDiagonal=e.allowDiagonal,this.dontCrossCorners=e.dontCrossCorners,this.diagonalMovement=e.diagonalMovement,this.diagonalMovement||(this.allowDiagonal?this.dontCrossCorners?this.diagonalMovement=o.OnlyWhenNoObstacles:this.diagonalMovement=o.IfAtMostOneObstacle:this.diagonalMovement=o.Never)}var r=i(2),o=i(0);n.prototype.findPath=function(e,t,i,n,o){var s,a,l,u,c,h=[],f=this.diagonalMovement,p=o.getNodeAt(e,t),d=o.getNodeAt(i,n);for(h.push(p),p.opened=!0;h.length;){if(l=h.shift(),l.closed=!0,l===d)return r.backtrace(d);for(s=o.getNeighbors(l,f),u=0,c=s.length;u<c;++u)a=s[u],a.closed||a.opened||(h.push(a),a.opened=!0,a.parent=l)}return[]},e.exports=n},function(e,t,i){"use strict";function n(e){r.call(this,e),this.heuristic=function(e,t){return 0}}var r=i(11);n.prototype=new r,n.prototype.constructor=n,e.exports=n},function(e,t,i){"use strict";function n(e){e=e||{},this.allowDiagonal=e.allowDiagonal,this.dontCrossCorners=e.dontCrossCorners,this.diagonalMovement=e.diagonalMovement,this.heuristic=e.heuristic||r.manhattan,this.weight=e.weight||1,this.trackRecursion=e.trackRecursion||!1,this.timeLimit=e.timeLimit||1/0,this.diagonalMovement||(this.allowDiagonal?this.dontCrossCorners?this.diagonalMovement=s.OnlyWhenNoObstacles:this.diagonalMovement=s.IfAtMostOneObstacle:this.diagonalMovement=s.Never),this.diagonalMovement===s.Never?this.heuristic=e.heuristic||r.manhattan:this.heuristic=e.heuristic||r.octile}var r=(i(2),i(3)),o=i(10),s=i(0);n.prototype.findPath=function(e,t,i,n,r){var s,a,l,u=0,c=(new Date).getTime(),h=function(e,t){return this.heuristic(Math.abs(t.x-e.x),Math.abs(t.y-e.y))}.bind(this),f=function(e,t){return e.x===t.x||e.y===t.y?1:Math.SQRT2},p=function(e,t,i,n,s){if(u++,this.timeLimit>0&&(new Date).getTime()-c>1e3*this.timeLimit)return 1/0;var a=t+h(e,v)*this.weight;if(a>i)return a;if(e==v)return n[s]=[e.x,e.y],e;var l,d,y,m,b=r.getNeighbors(e,this.diagonalMovement);for(y=0,l=1/0;m=b[y];++y){if(this.trackRecursion&&(m.retainCount=m.retainCount+1||1,!0!==m.tested&&(m.tested=!0)),(d=p(m,t+f(e,m),i,n,s+1))instanceof o)return n[s]=[e.x,e.y],d;this.trackRecursion&&0==--m.retainCount&&(m.tested=!1),d<l&&(l=d)}return l}.bind(this),d=r.getNodeAt(e,t),v=r.getNodeAt(i,n),y=h(d,v);for(s=0;!0;++s){if(a=[],(l=p(d,0,y,a,0))===1/0)return[];if(l instanceof o)return a;y=l}return[]},e.exports=n},function(e,t,i){"use strict";function n(e){r.call(this,e)}var r=i(6),o=i(0);n.prototype=new r,n.prototype.constructor=n,n.prototype._jump=function(e,t,i,n){var r=this.grid,o=e-i,s=t-n;if(!r.isWalkableAt(e,t))return null;if(!0===this.trackJumpRecursion&&(r.getNodeAt(e,t).tested=!0),r.getNodeAt(e,t)===this.endNode)return[e,t];if(0!==o&&0!==s){if(r.isWalkableAt(e-o,t+s)&&!r.isWalkableAt(e-o,t)||r.isWalkableAt(e+o,t-s)&&!r.isWalkableAt(e,t-s))return[e,t];if(this._jump(e+o,t,e,t)||this._jump(e,t+s,e,t))return[e,t]}else if(0!==o){if(r.isWalkableAt(e+o,t+1)&&!r.isWalkableAt(e,t+1)||r.isWalkableAt(e+o,t-1)&&!r.isWalkableAt(e,t-1))return[e,t]}else if(r.isWalkableAt(e+1,t+s)&&!r.isWalkableAt(e+1,t)||r.isWalkableAt(e-1,t+s)&&!r.isWalkableAt(e-1,t))return[e,t];return this._jump(e+o,t+s,e,t)},n.prototype._findNeighbors=function(e){var t,i,n,r,s,a,l,u,c=e.parent,h=e.x,f=e.y,p=this.grid,d=[];if(c)t=c.x,i=c.y,n=(h-t)/Math.max(Math.abs(h-t),1),r=(f-i)/Math.max(Math.abs(f-i),1),0!==n&&0!==r?(p.isWalkableAt(h,f+r)&&d.push([h,f+r]),p.isWalkableAt(h+n,f)&&d.push([h+n,f]),p.isWalkableAt(h+n,f+r)&&d.push([h+n,f+r]),p.isWalkableAt(h-n,f)||d.push([h-n,f+r]),p.isWalkableAt(h,f-r)||d.push([h+n,f-r])):0===n?(p.isWalkableAt(h,f+r)&&d.push([h,f+r]),p.isWalkableAt(h+1,f)||d.push([h+1,f+r]),p.isWalkableAt(h-1,f)||d.push([h-1,f+r])):(p.isWalkableAt(h+n,f)&&d.push([h+n,f]),p.isWalkableAt(h,f+1)||d.push([h+n,f+1]),p.isWalkableAt(h,f-1)||d.push([h+n,f-1]));else for(s=p.getNeighbors(e,o.Always),l=0,u=s.length;l<u;++l)a=s[l],d.push([a.x,a.y]);return d},e.exports=n},function(e,t,i){"use strict";function n(e){r.call(this,e)}var r=i(6),o=i(0);n.prototype=new r,n.prototype.constructor=n,n.prototype._jump=function(e,t,i,n){var r=this.grid,o=e-i,s=t-n;if(!r.isWalkableAt(e,t))return null;if(!0===this.trackJumpRecursion&&(r.getNodeAt(e,t).tested=!0),r.getNodeAt(e,t)===this.endNode)return[e,t];if(0!==o&&0!==s){if(r.isWalkableAt(e-o,t+s)&&!r.isWalkableAt(e-o,t)||r.isWalkableAt(e+o,t-s)&&!r.isWalkableAt(e,t-s))return[e,t];if(this._jump(e+o,t,e,t)||this._jump(e,t+s,e,t))return[e,t]}else if(0!==o){if(r.isWalkableAt(e+o,t+1)&&!r.isWalkableAt(e,t+1)||r.isWalkableAt(e+o,t-1)&&!r.isWalkableAt(e,t-1))return[e,t]}else if(r.isWalkableAt(e+1,t+s)&&!r.isWalkableAt(e+1,t)||r.isWalkableAt(e-1,t+s)&&!r.isWalkableAt(e-1,t))return[e,t];return r.isWalkableAt(e+o,t)||r.isWalkableAt(e,t+s)?this._jump(e+o,t+s,e,t):null},n.prototype._findNeighbors=function(e){var t,i,n,r,s,a,l,u,c=e.parent,h=e.x,f=e.y,p=this.grid,d=[];if(c)t=c.x,i=c.y,n=(h-t)/Math.max(Math.abs(h-t),1),r=(f-i)/Math.max(Math.abs(f-i),1),0!==n&&0!==r?(p.isWalkableAt(h,f+r)&&d.push([h,f+r]),p.isWalkableAt(h+n,f)&&d.push([h+n,f]),(p.isWalkableAt(h,f+r)||p.isWalkableAt(h+n,f))&&d.push([h+n,f+r]),!p.isWalkableAt(h-n,f)&&p.isWalkableAt(h,f+r)&&d.push([h-n,f+r]),!p.isWalkableAt(h,f-r)&&p.isWalkableAt(h+n,f)&&d.push([h+n,f-r])):0===n?p.isWalkableAt(h,f+r)&&(d.push([h,f+r]),p.isWalkableAt(h+1,f)||d.push([h+1,f+r]),p.isWalkableAt(h-1,f)||d.push([h-1,f+r])):p.isWalkableAt(h+n,f)&&(d.push([h+n,f]),p.isWalkableAt(h,f+1)||d.push([h+n,f+1]),p.isWalkableAt(h,f-1)||d.push([h+n,f-1]));else for(s=p.getNeighbors(e,o.IfAtMostOneObstacle),l=0,u=s.length;l<u;++l)a=s[l],d.push([a.x,a.y]);return d},e.exports=n},function(e,t,i){"use strict";function n(e){r.call(this,e)}var r=i(6),o=i(0);n.prototype=new r,n.prototype.constructor=n,n.prototype._jump=function(e,t,i,n){var r=this.grid,o=e-i,s=t-n;if(!r.isWalkableAt(e,t))return null;if(!0===this.trackJumpRecursion&&(r.getNodeAt(e,t).tested=!0),r.getNodeAt(e,t)===this.endNode)return[e,t];if(0!==o&&0!==s){if(this._jump(e+o,t,e,t)||this._jump(e,t+s,e,t))return[e,t]}else if(0!==o){if(r.isWalkableAt(e,t-1)&&!r.isWalkableAt(e-o,t-1)||r.isWalkableAt(e,t+1)&&!r.isWalkableAt(e-o,t+1))return[e,t]}else if(0!==s&&(r.isWalkableAt(e-1,t)&&!r.isWalkableAt(e-1,t-s)||r.isWalkableAt(e+1,t)&&!r.isWalkableAt(e+1,t-s)))return[e,t];return r.isWalkableAt(e+o,t)&&r.isWalkableAt(e,t+s)?this._jump(e+o,t+s,e,t):null},n.prototype._findNeighbors=function(e){var t,i,n,r,s,a,l,u,c=e.parent,h=e.x,f=e.y,p=this.grid,d=[];if(c)if(t=c.x,i=c.y,n=(h-t)/Math.max(Math.abs(h-t),1),r=(f-i)/Math.max(Math.abs(f-i),1),0!==n&&0!==r)p.isWalkableAt(h,f+r)&&d.push([h,f+r]),p.isWalkableAt(h+n,f)&&d.push([h+n,f]),p.isWalkableAt(h,f+r)&&p.isWalkableAt(h+n,f)&&d.push([h+n,f+r]);else{var v;if(0!==n){v=p.isWalkableAt(h+n,f);var y=p.isWalkableAt(h,f+1),m=p.isWalkableAt(h,f-1);v&&(d.push([h+n,f]),y&&d.push([h+n,f+1]),m&&d.push([h+n,f-1])),y&&d.push([h,f+1]),m&&d.push([h,f-1])}else if(0!==r){v=p.isWalkableAt(h,f+r);var b=p.isWalkableAt(h+1,f),g=p.isWalkableAt(h-1,f);v&&(d.push([h,f+r]),b&&d.push([h+1,f+r]),g&&d.push([h-1,f+r])),b&&d.push([h+1,f]),g&&d.push([h-1,f])}}else for(s=p.getNeighbors(e,o.OnlyWhenNoObstacles),l=0,u=s.length;l<u;++l)a=s[l],d.push([a.x,a.y]);return d},e.exports=n},function(e,t,i){"use strict";function n(e){r.call(this,e)}var r=i(6),o=i(0);n.prototype=new r,n.prototype.constructor=n,n.prototype._jump=function(e,t,i,n){var r=this.grid,o=e-i,s=t-n;if(!r.isWalkableAt(e,t))return null;if(!0===this.trackJumpRecursion&&(r.getNodeAt(e,t).tested=!0),r.getNodeAt(e,t)===this.endNode)return[e,t];if(0!==o){if(r.isWalkableAt(e,t-1)&&!r.isWalkableAt(e-o,t-1)||r.isWalkableAt(e,t+1)&&!r.isWalkableAt(e-o,t+1))return[e,t]}else{if(0===s)throw new Error("Only horizontal and vertical movements are allowed");if(r.isWalkableAt(e-1,t)&&!r.isWalkableAt(e-1,t-s)||r.isWalkableAt(e+1,t)&&!r.isWalkableAt(e+1,t-s))return[e,t];if(this._jump(e+1,t,e,t)||this._jump(e-1,t,e,t))return[e,t]}return this._jump(e+o,t+s,e,t)},n.prototype._findNeighbors=function(e){var t,i,n,r,s,a,l,u,c=e.parent,h=e.x,f=e.y,p=this.grid,d=[];if(c)t=c.x,i=c.y,n=(h-t)/Math.max(Math.abs(h-t),1),r=(f-i)/Math.max(Math.abs(f-i),1),0!==n?(p.isWalkableAt(h,f-1)&&d.push([h,f-1]),p.isWalkableAt(h,f+1)&&d.push([h,f+1]),p.isWalkableAt(h+n,f)&&d.push([h+n,f])):0!==r&&(p.isWalkableAt(h-1,f)&&d.push([h-1,f]),p.isWalkableAt(h+1,f)&&d.push([h+1,f]),p.isWalkableAt(h,f+r)&&d.push([h,f+r]));else for(s=p.getNeighbors(e,o.Never),l=0,u=s.length;l<u;++l)a=s[l],d.push([a.x,a.y]);return d},e.exports=n},function(e,t,i){"use strict";function n(e){return e=e||{},e.diagonalMovement===r.Never?new o(e):e.diagonalMovement===r.Always?new s(e):e.diagonalMovement===r.OnlyWhenNoObstacles?new a(e):new l(e)}var r=i(0),o=i(40),s=i(37),a=i(39),l=i(38);e.exports=n},function(e,t,i){"use strict";e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function e(e,t){var i=[],n=!0,r=!1,o=void 0;try{for(var s,a=e[Symbol.iterator]();!(n=(s=a.next()).done)&&(i.push(s.value),!t||i.length!==t);n=!0);}catch(e){r=!0,o=e}finally{try{!n&&a.return&&a.return()}finally{if(r)throw o}}return i}return function(t,i){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),s=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),a=i(1),l=i(17),u=n(l),c=i(18),h=n(c),f=i(16),p=n(f),d=i(15),v=n(d),y=i(21),m=n(y),b=i(8),g=n(b),P=i(4),k=n(P);i(13);var T=i(19),w=n(T),O=i(22),A=n(O),x=i(23),S=n(x),E=i(24),_=n(E),M=i(25),D=n(M),I=i(20),W=n(I),N=i(9);new(function(){function e(){r(this,e),this.selectors=N.selectors;var t=document.querySelector(this.selectors.CANVAS);this.ctx=t.getContext("2d"),this.blockSize=N.blockSize,this.gameCells=N.gameCells,this.scorePerObject=N.scorePerObject,this.initEventListeners(),this.initHtmlEventListeners()}return s(e,[{key:"play",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:N.pacmanLives,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;this.score=t,this.coinsLeft=0,this.currentLvl=e,this.lives=i,this.awardedLives=n,this.buildMap(),this.pathFinder=new w.default({map:this.map}),this.renderScence(),this.createPacman(),this.createGhosts(),this.start(),this.updateGameStatuses()}},{key:"win",value:function(){this.stop(),this.showNextLvlView()}},{key:"renderLoop",value:function(){this.cleanCanvas(),this.renderScence(),this.renderPlayers(),this.stopped?(window.cancelAnimationFrame(this.requestId),this.requestId=void 0):this.requestId=requestAnimationFrame(this.renderLoop.bind(this))}},{key:"cleanCanvas",value:function(){this.ctx.clearRect(0,0,600,600)}},{key:"start",value:function(){var e=this;setTimeout(function(){e.requestId||(e.stopped=!1,e.renderLoop())},0)}},{key:"stop",value:function(){this.requestId&&(this.stopped=!0,window.cancelAnimationFrame(this.requestId),this.requestId=void 0)}},{key:"renderScence",value:function(){this.map.map(function(e,t){e.map(function(e,t){e&&e.render()})})}},{key:"renderPlayers",value:function(){this.renderGhosts(),this.pacman.render()}},{key:"renderGhosts",value:function(){this.inky.render(),this.blinky.render(),this.pinky.render(),this.clyde.render()}},{key:"buildMap",value:function(){var e=this;this.map=[],this.getSettings().map.map(function(t,i){var n=~~(i/27);e.map[n]=e.map[n]||[];var r=i;i>=e.gameCells&&(r=i%e.gameCells);var o=e.createGameObject(t,n,r);e.map[n].push(o)})}},{key:"createGameObject",value:function(e,t,i){switch(e){case a.gameObjectsTypes.EMPTINESS:return new u.default;case a.gameObjectsTypes.WALL:return new h.default({size:this.blockSize,row:t,ceil:i,ctx:this.ctx});case a.gameObjectsTypes.COIN:return this.coinsLeft+=1,new p.default({size:this.blockSize,row:t,ceil:i,ctx:this.ctx});case a.gameObjectsTypes.BIG_COIN:return this.coinsLeft+=1,new v.default({size:this.blockSize,row:t,ceil:i,ctx:this.ctx})}}},{key:"createPacman",value:function(){var e=this.getSettings();this.pacman=new m.default({ctx:this.ctx,size:this.blockSize,map:this.map,x:e.pacman.x,y:e.pacman.y,speed:e.pacman.speed,eatSpeed:e.pacman.eatSpeed})}},{key:"onPacmanDie",value:function(){if(this.stop(),--this.lives<0)return void this.showGameOverView();this.createPacman(),this.createGhosts(),this.updateGameStatuses(),this.start()}},{key:"getSettings",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.currentLvl;return N.levels[e]||N.levels.defaultLevel}},{key:"initEventListeners",value:function(){var e=this;k.default.on(g.default.EAT_COIN,function(t){var i=o(t,2),n=i[0],r=i[1];e.coinsLeft-=1,e.score+=e.scorePerObject[a.gameObjectsTypes.COIN],e.map[r][n]&&(e.map[r][n]=new u.default),e.updateGameStatuses(),0==e.coinsLeft&&e.win()}),k.default.on(g.default.EAT_BIG_COIN,function(t){var i=o(t,2),n=i[0],r=i[1];e.coinsLeft-=1,e.score+=e.scorePerObject[a.gameObjectsTypes.BIG_COIN],e.map[r][n]&&(e.map[r][n]=new u.default),e.updateGameStatuses(),0==e.coinsLeft&&e.win()}),k.default.on(g.default.EAT_GHOST,function(){e.score+=e.scorePerObject.GHOST,e.updateGameStatuses()}),k.default.on(g.default.PACMAN_DEAD,function(){e.onPacmanDie()})}},{key:"createGhosts",value:function(){var e=this.getSettings();this.inky=new _.default({ctx:this.ctx,size:this.blockSize,map:this.map,findPath:this.pathFinder.findPath.bind(this.pathFinder),pacman:this.pacman,goToX:e.inky.goToX,goToY:e.inky.goToY,x:e.inky.startX,y:e.inky.startY,speed:e.inky.speed,enabled:e.inky.enabled,escapeTime:e.escapeTime,findPacmanEverywhereInterval:e.findPacmanEverywhereInterval}),this.blinky=new A.default({ctx:this.ctx,size:this.blockSize,map:this.map,findPath:this.pathFinder.findPath.bind(this.pathFinder),pacman:this.pacman,goToX:e.blinky.goToX,goToY:e.blinky.goToY,x:e.blinky.startX,y:e.blinky.startY,speed:e.blinky.speed,enabled:e.blinky.enabled,escapeTime:e.escapeTime,dieTime:e.dieTime,findPacmanEverywhereInterval:e.findPacmanEverywhereInterval}),this.pinky=new D.default({ctx:this.ctx,size:this.blockSize,map:this.map,findPath:this.pathFinder.findPath.bind(this.pathFinder),pacman:this.pacman,goToX:e.pinky.goToX,goToY:e.pinky.goToY,x:e.pinky.startX,y:e.pinky.startY,speed:e.pinky.speed,enabled:e.pinky.enabled,escapeTime:e.escapeTime,dieTime:e.dieTime,findPacmanEverywhereInterval:e.findPacmanEverywhereInterval}),this.clyde=new S.default({ctx:this.ctx,size:this.blockSize,map:this.map,findPath:this.pathFinder.findPath.bind(this.pathFinder),pacman:this.pacman,goToX:e.clyde.goToX,goToY:e.clyde.goToY,x:e.clyde.startX,y:e.clyde.startY,speed:e.clyde.speed,enabled:e.clyde.enabled,escapeTime:e.escapeTime,dieTime:e.dieTime,findPacmanEverywhereInterval:e.findPacmanEverywhereInterval})}},{key:"initHtmlEventListeners",value:function(){var e=this;(0,W.default)("click",this.selectors.PLAY_BUTTON,function(){e.hidePlayView(),e.hideGameOverView(),e.play()}),(0,W.default)("click",this.selectors.NEXT_LVL_BUTTON,function(){e.hideNextLvlView(),e.play(e.currentLvl+1,e.score,e.lives,e.awardedLives)})}},{key:"hidePlayView",value:function(){document.querySelector(this.selectors.PLAY_VIEW).style.display="none"}},{key:"hideGameOverView",value:function(){document.querySelector(this.selectors.GAME_OVER_VIEW).style.display="none"}},{key:"showGameOverView",value:function(){document.querySelector(this.selectors.GAME_OVER_VIEW).style.display="block"}},{key:"showPlayView",value:function(){document.querySelector(this.selectors.PLAY_VIEW).style.display="block"}},{key:"updateGameStatuses",value:function(){this.score/((this.awardedLives+1)*N.scoreToAwardLife)>=1&&(this.lives++,this.awardedLives++),document.querySelector(this.selectors.SCORE).innerText=this.score,document.querySelector(this.selectors.GAME_OVER_SCORE).innerText=this.score,document.querySelector(this.selectors.LIVES).innerText=this.lives,document.querySelector(this.selectors.LVL).innerText=this.currentLvl}},{key:"showNextLvlView",value:function(){var e=this.getSettings(this.currentLvl+1);document.querySelector(this.selectors.NEXT_LVL_VIEW).style.display="block",document.querySelector(this.selectors.NEW_LVL_NUMBER).innerText=this.currentLvl+1,document.querySelector(this.selectors.LVL_TITLE).innerText=e.lvlTitle}},{key:"hideNextLvlView",value:function(){document.querySelector(this.selectors.NEXT_LVL_VIEW).style.display="none"}}]),e}())},function(e,t,i){"use strict";function n(e){return void 0!==e}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n}]);